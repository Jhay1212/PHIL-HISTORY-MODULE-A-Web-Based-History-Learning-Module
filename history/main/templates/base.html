<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='homej.css')}}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">

    <title>Philippine History Module</title>
	{{ ckeditor.load(standard)}}
</head>

{% block css %}
{% endblock %}


<style>
	#chat-box {
            position: absolute;
            /* top: 50%;
            left: 50%;
            transform: translate(-50%, -50%); */
            bottom: 20px;
            right: 20px;
            font-size: 16px;
        }
        #chat-toggle {
            background-color: #007bff;
            border: none;
            color: white;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }
        #chat-content {
            display: none;
            width: 300px;
            height: 400px;
            background-color: white;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            border-radius: 10px;
            overflow: hidden;
        }
        #chat-messages {
            height: 350px;
            overflow-y: auto;
            padding: 10px;
            background-color: #fafafa;
        }
        #chat-input {
            display: flex;
            border-top: 1px solid #efefef;
        }
        #chat-input input {
            flex: 1;
            padding: 10px;
            border: none;
            outline: none;
        }
        #chat-input button {
            background-color: #007bff;
            color: white;
            padding: 0 20px;
            border: none;
            cursor: pointer;
        }
        .message {
            margin-bottom: 10px;
            padding: 8px;
            background-color: #007bff;
            color: white;
            border-radius: 20px;
            display: inline-block;
            max-width: 80%;
        }
        .received {
            background-color: #efefef;
            color: black;
        }
</style>
<body>
<!-- Top Header -->
			<header id="header">
			<div class="container">
			<button id="sidebarToggle"><img src="{{ url_for('static', filename='PICS/sidenav1.1.png')}}" alt="Menu"></button>
			
            <div class="logo">
            <img src="{{ url_for('static', filename='PICS/logo1.png') }}" alt="Logo">
            </div>
			
            <h1>DISCOVERING PHILIPPINE HISTORY</h1>
			
<!-- Search -->
            <div class="search-bar">
			
			<form action="{{ url_for('/.search')}}" method="post">
				{{ forms.hidden_tag() }}


				<button class="search-img"><img src="{{ url_for('static', filename='PICS/search.png')}}" alt="Search"></button>
				{{ forms.search(class='chewy') }}
				<!-- {{ forms.submit }} -->
				<button class="info-btn"><img src="{{ url_for('static', filename='PICS/info.png')}}" alt="Info"></button>
			</form>
			
			</div>
            </div>
            </header>

<!-- Table of Contents Sidebar -
			<nav id="navSidebar">
				<li><label class="label1"> TABLE OF CONTENTS</label></li><hr>
			
				<ul>
					{% for unit in units%}

				

				<li>
					<a href="#mainContent">{{ unit.unit_title }}</a>
					<div class="topic-buttons">
						{% for subtopic in unit.lesson_key %}
						<button class="dropdown-btn">{{ subtopic}}</button>

						{% endfor %}
					  <button class="dropdown-btn">Subtopic 2</button>
					  <button class="dropdown-btn">Subtopic 3</button>
				  </div>
				</li>
							  {% endfor %}
			
            <li>

    <a href="#mainContent">UNIT 1</a>
   
    <div class="topic-buttons">
        <button class="dropdown-btn">Subtopic 2</button>
        <button class="dropdown-btn">Subtopic 3</button>
    </div>
</li>
			
			<li>
			<a href="#TOPIC 1">UNIT 2</a>
			 <div class="topic-buttons">
        <button class="dropdown-btn">Subtopic 1</button>
        <button class="dropdown-btn">Subtopic 2</button>
        <button class="dropdown-btn">Subtopic 3</button>
    </div>
	</li>
	
			<li>
			<a href="#TOPIC 2">UNIT 3</a>
			<div class="topic-buttons">
        <button class="dropdown-btn">Subtopic 1</button>
        <button class="dropdown-btn">Subtopic 2</button>
        <button class="dropdown-btn">Subtopic 3</button>
    </div>
	</li>
	
			<li>
			<a href="#TOPIC 3">UNIT 4</a>
			<div class="topic-buttons">
        <button class="dropdown-btn">Subtopic 1</button>
        <button class="dropdown-btn">Subtopic 2</button>
        <button class="dropdown-btn">Subtopic 3</button>
    </div>
	</li>
			
			<li>
			<a href="#TOPIC 4">UNIT 5</a>
			<div class="topic-buttons">
        <button class="dropdown-btn">Subtopic 1</button>
        <button class="dropdown-btn">Subtopic 2</button>
        <button class="dropdown-btn">Subtopic 3</button>
    </div>
	</li>
			
			<li>
			<a href="#TOPIC 5">UNIT 6</a>
			<div class="topic-buttons">
        <button class="dropdown-btn">Subtopic 1</button>
        <button class="dropdown-btn">Subtopic 2</button>
        <button class="dropdown-btn">Subtopic 3</button>
    </div>
	</li>
			
			<li>
			<a href="#TOPIC 6">UNIT 7</a>
			<div class="topic-buttons">
        <button class="dropdown-btn">Subtopic 1</button>
        <button class="dropdown-btn">Subtopic 2</button>
        <button class="dropdown-btn">Subtopic 3</button>
    </div>
	</li>
			
			<li>
			<a href="#TOPIC 7">UNIT 8</a>
			<div class="topic-buttons">
        <button class="dropdown-btn">Subtopic 1</button>
        <button class="dropdown-btn">Subtopic 2</button>
        <button class="dropdown-btn">Subtopic 3</button>
    </div>
	</li>
			
			<li>
			<a href="#TOPIC 8">UNIT 9</a>
			<div class="topic-buttons">
        <button class="dropdown-btn">Subtopic 1</button>
        <button class="dropdown-btn">Subtopic 2</button>
        <button class="dropdown-btn">Subtopic 3</button>
    </div>
	</li>
			
			<li>
			<a href="#TOPIC 9">UNIT 10</a>
			<div class="topic-buttons">
        <button class="dropdown-btn">Subtopic 1</button>
        <button class="dropdown-btn">Subtopic 2</button>
        <button class="dropdown-btn">Subtopic 3</button>
    </div>
	</li>
			
			<li>
			<a href="#TOPIC 10">UNIT 11</a>
			<div class="topic-buttons">
        <button class="dropdown-btn">Subtopic 1</button>
        <button class="dropdown-btn">Subtopic 2</button>
        <button class="dropdown-btn">Subtopic 3</button>
    </div>
	</li>
			
			<li>
			<a href="#TOPIC 11">UNIT 12</a>
			<div class="topic-buttons">
        <button class="dropdown-btn">Subtopic 1</button>
        <button class="dropdown-btn">Subtopic 2</button>
        <button class="dropdown-btn">Subtopic 3</button>
    </div>
	</li>
			
			<li>
			<a href="#TOPIC 12">UNIT 13</a>
			<div class="topic-buttons">
        <button class="dropdown-btn">Subtopic 1</button>
        <button class="dropdown-btn">Subtopic 2</button>
        <button class="dropdown-btn">Subtopic 3</button>
    </div>
	</li>
			
			<li>
			<a href="#TOPIC 13">UNIT 14</a>
			<div class="topic-buttons">
        <button class="dropdown-btn">Subtopic 1</button>
        <button class="dropdown-btn">Subtopic 2</button>
        <button class="dropdown-btn">Subtopic 3</button>
    </div>
	</li>
			
			<li>
			<a href="#TOPIC 14">UNIT 15</a>
			<div class="topic-buttons">
        <button class="dropdown-btn">Subtopic 1</button>
        <button class="dropdown-btn">Subtopic 2</button>
        <button class="dropdown-btn">Subtopic 3</button>
    </div>
	</li>
			  
			</ul>
			
			</nav>
		-->
    
<!-- User Navigation Sidebar -->
			<aside id="sidebar">
			<nav>
			
			<div class="user-icon">
			<img src="{{ url_for('static', filename='PICS/haerin.jpg')}}" alt="User Icon" id="userIcon">>
			</div>
	
			<div class="username">
			<p>{{ current_user.username }}</p>
			</div>
    
			 <div class="user-actions">
			<label for="editUserIconInput" id="editUserIconLabel">Edit Icon</label>
            <input type="file" id="editUserIconInput" accept="image/*"></input>
			</div>
			
			<ul>
			<li><a href="{{ url_for('/.home')}}">HOME</a></li>
			<li><a href="{{ url_for('/.gallery')}}">GALLERY</a></li>
            <li><a href="{{ url_for('/.quiz')}}">TAKE A QUIZ</a></li>
			{% if current_user.is_authenticated %}
            	<li><a href="{{ url_for('/auth.logout')}}">LOGOUT</a></li>
			{% else %}
				<li><a href="{{ url_for('/auth.login')}}">LOGIN</a></li>
			{% endif %}
			</ul>
			
			<button id="closeSidebar">Close</button>
			</nav>
			</aside>

<!-- CONTENTS -->
            {% block main %}
            {% endblock %}


			<div id="chat-box">
				<button id="chat-toggle"><i class="fas fa-comments"></i></button>
				<div id="chat-content">
					<div id="chat-messages"></div>
					<div id="chat-input">
						<input type="text" id="user-input" placeholder="Type your message...">
						<button id="send-button">Send</button>
					</div>
				</div>
			</div>
			<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
			<script>
				$(document).ready(function() {
					$('#chat-toggle').click(function() {
						$('#chat-content').slideToggle('fast');
					});
		
					$('#send-button').click(function() {
						sendMessage();
					});
		
					$('#user-input').keypress(function(e) {
						if(e.which == 13) {
							sendMessage();
						}
					});
		
					function sendMessage() {
						var message = $('#user-input').val();
						if(message.trim() != '') {
							$('#chat-messages').append('<div class="message">' + message + '</div><br>');
							$('#user-input').val('');
		
							$.ajax({
								url: '/handle/message',
								type: 'POST',
								contentType: 'application/json',
								data: JSON.stringify({ message: message }),
								success: function(data) {
									$('#chat-messages').append('<div class="message received">' + data.response + '</div><br>');
									$('#chat-messages').scrollTop($('#chat-messages')[0].scrollHeight);
								}
							});
						}
					}
				});
			</script>

    <script src="{{ url_for('static', filename='homejs.js')}}"></script>
</body>
</html>